{"version":3,"sources":["../../../src/client/containers/LoginPageModule.js"],"names":["loginEpic","SET_EMAIL_TEXT","SET_PASSOWRD_TEXT","LOGIN","setEmailText","type","email","setPasswordText","password","login","console","log","data","initialState","state","action","handleLoginResponse","response","resp","JSON","stringify","success","browserHistory","push","alert","Observable","of","action$","ofType","switchMap","url","method","timeout","headers","body","mergeMap","catch","error"],"mappings":";;;;;;;;;QAiEgBA,S,GAAAA,S;;AAjEhB;;AACA;;AACA;;AACA;;AAEA;AACA,IAAMC,iBAAiB,gBAAvB;AACA,IAAMC,oBAAoB,mBAA1B;AACA,IAAMC,QAAQ,OAAd;AACA;AACO,IAAMC,sCAAe,SAAfA,YAAe,QAAS;AACjC,WAAO;AACHC,cAAMJ,cADH;AAEHK,eAAOA,KAFJ,CAES;AAFT,KAAP;AAIH,CALM;;AAOA,IAAMC,4CAAkB,SAAlBA,eAAkB,WAAY;AACvC,WAAO;AACHF,cAAMH,iBADH;AAEHM,kBAAUA;AAFP,KAAP;AAIH,CALM;;AAOA,IAAMC,wBAAQ,SAARA,KAAQ,OAAQ;AACzBC,YAAQC,GAAR,CAAYC,IAAZ;AACA,WAAO;AACHP,cAAMF,KADH;AAEHS,cAAMA;AAFH,KAAP;AAIH,CANM;AAOP;AACA,IAAMC,eAAe;AACjBP,WAAO,EADU;AAEjBE,cAAU;AAFO,CAArB;;AAKA;;kBACgB,YAAkC;AAAA,QAAjCM,KAAiC,uEAAzBD,YAAyB;AAAA,QAAXE,MAAW;;AAC9C,YAAQA,OAAOV,IAAf;AACI,aAAKJ,cAAL;AACI,gCAAYa,KAAZ,IAAmBR,OAAOS,OAAOT,KAAjC;;AAEJ,aAAKJ,iBAAL;AACI,gCAAYY,KAAZ,IAAmBN,UAAUO,OAAOP,QAApC;;AAEJ;AACI,mBAAOM,KAAP;AARR;AAUH,C;;AAED,IAAME,sBAAoB,SAApBA,mBAAoB,CAACC,QAAD,EAAY;AAClC,QAAMC,OAAKD,SAASA,QAApB;AACAP,YAAQC,GAAR,CAAY,2BAAyBQ,KAAKC,SAAL,CAAeH,QAAf,CAArC;AACA,QAAGC,KAAKG,OAAL,IAAc,IAAjB,EAAsB;AAClBC,oCAAeC,IAAf,CAAoB,GAApB;AACH,KAFD,MAEK;AACDb,gBAAQC,GAAR,CAAY,aAAZ;AACAa,cAAM,+BAAN;AACF;AACD;AACD,WAAOC,iBAAWC,EAAX,CAAc,EAACrB,MAAK,EAAN,EAAd,CAAP,CAVkC,CAUF;AAChC;AACH,CAZD;;AAcO,SAASL,SAAT,CAAmB2B,OAAnB,EAA2B;AAC9B,WAAOA,QAAQC,MAAR,CAAezB,KAAf,EACN0B,SADM,CACI;AAAA,eACP,gBAAK;AACFC,iBAAI,QADF;AAEFC,oBAAO,MAFL;AAGFC,qBAAS,KAHP;AAIFC,qBAAQ,EAAC,gBAAe,kBAAhB,EAJN;AAKFC,kBAAK,EAACtB,MAAKG,OAAOH,IAAb;AALH,SAAL,EAOCuB,QAPD,CAOU;AAAA,mBAAUnB,oBAAoBC,QAApB,CAAV;AAAA,SAPV,EAQCmB,KARD,CAQO;AAAA,mBAAO1B,QAAQC,GAAR,CAAY,YAAU0B,KAAtB,CAAP;AAAA,SARP,CADO;AAAA,KADJ,CAAP;AAYH","file":"LoginPageModule.js","sourcesContent":["import { Observable } from \"rxjs\";\nimport 'rxjs/add/operator/mergeMap';\nimport {ajax} from 'rxjs/observable/dom/ajax';\nimport {browserHistory} from 'react-router';\n\n//modules contain related action creators,store,reducers and epics\nconst SET_EMAIL_TEXT = 'SET_EMAIL_TEXT';\nconst SET_PASSOWRD_TEXT = 'SET_PASSWORD_TEXT';\nconst LOGIN = \"LOGIN\";\n//action creator\nexport const setEmailText = email => {\n    return {\n        type: SET_EMAIL_TEXT,\n        email: email//key and value same name use one name only\n    };\n};\n\nexport const setPasswordText = password => {\n    return {\n        type: SET_PASSOWRD_TEXT,\n        password: password\n    };\n};\n\nexport const login = data => {\n    console.log(data);\n    return {\n        type: LOGIN,\n        data: data\n    };\n};\n//store for login\nconst initialState = {\n    email: \"\",\n    password: \"\"\n};\n\n//reducer for login\nexport default ((state = initialState, action) => {\n    switch (action.type) {\n        case SET_EMAIL_TEXT:\n            return { ...state, email: action.email };\n\n        case SET_PASSOWRD_TEXT:\n            return { ...state, password: action.password };\n\n        default:\n            return state;\n    }\n});\n\nconst handleLoginResponse=(response)=>{\n    const resp=response.response;\n    console.log(\"response from server: \"+JSON.stringify(response));\n    if(resp.success==true){\n        browserHistory.push('/');\n    }else{\n        console.log(\"not matched\");\n        alert(\"username/password not matched\");\n      //  browserHistory.push('/login');\n    }\n    return Observable.of({type:''});//for mergeMap\n    //return {type:\"\"}; for switchMap\n}\n\nexport function loginEpic(action$){\n    return action$.ofType(LOGIN)\n    .switchMap(action=>\n        ajax({\n           url:'/login',\n           method:'POST',\n           timeout: 30000,\n           headers:{'Content-Type':'application/json'},\n           body:{data:action.data} \n        })\n        .mergeMap(response=>handleLoginResponse(response))\n        .catch(error=>console.log(\"error: \"+error))\n        );\n}\n"]}